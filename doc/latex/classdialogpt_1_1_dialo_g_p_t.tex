\hypertarget{classdialogpt_1_1_dialo_g_p_t}{}\doxysection{Класс dialogpt.\+Dialo\+G\+PT}
\label{classdialogpt_1_1_dialo_g_p_t}\index{dialogpt.DialoGPT@{dialogpt.DialoGPT}}


Класс, содержащий в себе интерфейс работы с \mbox{\hyperlink{classdialogpt_1_1_dialo_g_p_t}{Dialo\+G\+PT}}.  


\doxysubsection*{Открытые члены}
\begin{DoxyCompactItemize}
\item 
def \mbox{\hyperlink{classdialogpt_1_1_dialo_g_p_t_ab6ee2206107110a79f5001333b5519ff}{\+\_\+\+\_\+init\+\_\+\+\_\+}} (self, \mbox{\hyperlink{classdialogpt_1_1_dialo_g_p_t_aa864d538055a3f372cf59791296e301a}{token}}, \mbox{\hyperlink{classdialogpt_1_1_dialo_g_p_t_acc97425ec9779b1740fad698eef25cc3}{chat\+\_\+id}}, \mbox{\hyperlink{classdialogpt_1_1_dialo_g_p_t_a530bab86aab98e328ddb7f4bc18dce98}{window\+\_\+size}}=10)
\begin{DoxyCompactList}\small\item\em Создаёт объект класса \mbox{\hyperlink{classdialogpt_1_1_dialo_g_p_t}{Dialo\+G\+PT}} для отдельного чата \end{DoxyCompactList}\item 
str \mbox{\hyperlink{classdialogpt_1_1_dialo_g_p_t_a9030169428af69ffd3bde4d88fa1db94}{get\+\_\+length\+\_\+param}} (self, str text)
\item 
def \mbox{\hyperlink{classdialogpt_1_1_dialo_g_p_t_a710d7e40d32e1571a54c06414632cfee}{generate}} (self, bot\+\_\+input\+\_\+ids, num\+\_\+return\+\_\+sequences=1, max\+\_\+length=512, no\+\_\+repeat\+\_\+ngram\+\_\+size=3, do\+\_\+sample=True, top\+\_\+k=50, top\+\_\+p=0.\+9, temperature=0.\+6, mask\+\_\+token\+\_\+id=tokenizer.\+mask\+\_\+token\+\_\+id, eos\+\_\+token\+\_\+id=tokenizer.\+eos\+\_\+token\+\_\+id, unk\+\_\+token\+\_\+id=tokenizer.\+unk\+\_\+token\+\_\+id, pad\+\_\+token\+\_\+id=tokenizer.\+pad\+\_\+token\+\_\+id, device=\textquotesingle{}cuda\textquotesingle{})
\begin{DoxyCompactList}\small\item\em Передаёт агрументы в функцию self.\+model.\+generate и вызывает её \end{DoxyCompactList}\item 
def \mbox{\hyperlink{classdialogpt_1_1_dialo_g_p_t_a3ead798f0125b12e978a9a39ead02996}{process\+\_\+text}} (self, input\+\_\+user, cnt\+\_\+\+Joke\+Classifier=0)
\begin{DoxyCompactList}\small\item\em Обрабатывает текст без команды \end{DoxyCompactList}\item 
def \mbox{\hyperlink{classdialogpt_1_1_dialo_g_p_t_af125e54ecf1b927033c723046c82f7a2}{get\+\_\+response}} (self, text)
\begin{DoxyCompactList}\small\item\em Обрабатывает текст с возможной командой \end{DoxyCompactList}\item 
def \mbox{\hyperlink{classdialogpt_1_1_dialo_g_p_t_a15964d6becb1f994fadb54fed7e00814}{restart}} (self)
\begin{DoxyCompactList}\small\item\em Забывает все предыдущие фразы в диалоге \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsection*{Открытые атрибуты}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{classdialogpt_1_1_dialo_g_p_t_aa864d538055a3f372cf59791296e301a}{token}}
\begin{DoxyCompactList}\small\item\em Токен, по которому бот может связаться с Telegram A\+PI. \end{DoxyCompactList}\item 
\mbox{\hyperlink{classdialogpt_1_1_dialo_g_p_t_acc97425ec9779b1740fad698eef25cc3}{chat\+\_\+id}}
\begin{DoxyCompactList}\small\item\em Id чата, в котором общается бот \end{DoxyCompactList}\item 
\mbox{\hyperlink{classdialogpt_1_1_dialo_g_p_t_a0f98d39513cc558c9a33ed89675e610f}{chat\+\_\+history}}
\begin{DoxyCompactList}\small\item\em Содержимое текущего диалога \end{DoxyCompactList}\item 
\mbox{\hyperlink{classdialogpt_1_1_dialo_g_p_t_ae554b8aa68bce5de3e6138b172201aeb}{user\+\_\+input\+\_\+size}}
\begin{DoxyCompactList}\small\item\em Размеры каждой фразы диалога \end{DoxyCompactList}\item 
\mbox{\hyperlink{classdialogpt_1_1_dialo_g_p_t_a530bab86aab98e328ddb7f4bc18dce98}{window\+\_\+size}}
\begin{DoxyCompactList}\small\item\em Число запоминаемых фраз в диалоге \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsection*{Статические открытые данные}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{classdialogpt_1_1_dialo_g_p_t_a027a43bc2a377fcdf0537e78a9c72277}{tokenizer}} = Auto\+Tokenizer.\+from\+\_\+pretrained(\char`\"{}Grossmend/rudialogpt3\+\_\+medium\+\_\+based\+\_\+on\+\_\+gpt2\char`\"{})
\begin{DoxyCompactList}\small\item\em Токенайзер модели \mbox{\hyperlink{classdialogpt_1_1_dialo_g_p_t}{Dialo\+G\+PT}}. \end{DoxyCompactList}\item 
\mbox{\hyperlink{classdialogpt_1_1_dialo_g_p_t_a9603b216b1ed4304e674f872f2c4a995}{model}} = Auto\+Model\+For\+Causal\+L\+M.\+from\+\_\+pretrained(\char`\"{}Grossmend/rudialogpt3\+\_\+medium\+\_\+based\+\_\+on\+\_\+gpt2\char`\"{}).cuda()
\begin{DoxyCompactList}\small\item\em Сама модель \mbox{\hyperlink{classdialogpt_1_1_dialo_g_p_t}{Dialo\+G\+PT}}. \end{DoxyCompactList}\item 
\mbox{\hyperlink{classdialogpt_1_1_dialo_g_p_t_a217e46fddb284e8bbd89947a954f9998}{joke\+\_\+classifier}} = None
\begin{DoxyCompactList}\small\item\em Модель Joke\+Classifier. \end{DoxyCompactList}\end{DoxyCompactItemize}


\doxysubsection{Подробное описание}
Класс, содержащий в себе интерфейс работы с \mbox{\hyperlink{classdialogpt_1_1_dialo_g_p_t}{Dialo\+G\+PT}}. 

См. определение в файле dialogpt.\+py строка 12



\doxysubsection{Конструктор(ы)}
\mbox{\Hypertarget{classdialogpt_1_1_dialo_g_p_t_ab6ee2206107110a79f5001333b5519ff}\label{classdialogpt_1_1_dialo_g_p_t_ab6ee2206107110a79f5001333b5519ff}} 
\index{dialogpt.DialoGPT@{dialogpt.DialoGPT}!\_\_init\_\_@{\_\_init\_\_}}
\index{\_\_init\_\_@{\_\_init\_\_}!dialogpt.DialoGPT@{dialogpt.DialoGPT}}
\doxysubsubsection{\texorpdfstring{\_\_init\_\_()}{\_\_init\_\_()}}
{\footnotesize\ttfamily def dialogpt.\+Dialo\+G\+P\+T.\+\_\+\+\_\+init\+\_\+\+\_\+ (\begin{DoxyParamCaption}\item[{}]{self,  }\item[{}]{token,  }\item[{}]{chat\+\_\+id,  }\item[{}]{window\+\_\+size = {\ttfamily 10} }\end{DoxyParamCaption})}



Создаёт объект класса \mbox{\hyperlink{classdialogpt_1_1_dialo_g_p_t}{Dialo\+G\+PT}} для отдельного чата 


\begin{DoxyParams}{Аргументы}
{\em token} & Токен чат-\/бота \\
\hline
{\em chat\+\_\+id} & id чата \\
\hline
{\em window\+\_\+size} & Число диалогов, которых запоминает бот \\
\hline
\end{DoxyParams}


См. определение в файле dialogpt.\+py строка 28



\doxysubsection{Методы}
\mbox{\Hypertarget{classdialogpt_1_1_dialo_g_p_t_a710d7e40d32e1571a54c06414632cfee}\label{classdialogpt_1_1_dialo_g_p_t_a710d7e40d32e1571a54c06414632cfee}} 
\index{dialogpt.DialoGPT@{dialogpt.DialoGPT}!generate@{generate}}
\index{generate@{generate}!dialogpt.DialoGPT@{dialogpt.DialoGPT}}
\doxysubsubsection{\texorpdfstring{generate()}{generate()}}
{\footnotesize\ttfamily def dialogpt.\+Dialo\+G\+P\+T.\+generate (\begin{DoxyParamCaption}\item[{}]{self,  }\item[{}]{bot\+\_\+input\+\_\+ids,  }\item[{}]{num\+\_\+return\+\_\+sequences = {\ttfamily 1},  }\item[{}]{max\+\_\+length = {\ttfamily 512},  }\item[{}]{no\+\_\+repeat\+\_\+ngram\+\_\+size = {\ttfamily 3},  }\item[{}]{do\+\_\+sample = {\ttfamily True},  }\item[{}]{top\+\_\+k = {\ttfamily 50},  }\item[{}]{top\+\_\+p = {\ttfamily 0.9},  }\item[{}]{temperature = {\ttfamily 0.6},  }\item[{}]{mask\+\_\+token\+\_\+id = {\ttfamily tokenizer.mask\+\_\+token\+\_\+id},  }\item[{}]{eos\+\_\+token\+\_\+id = {\ttfamily tokenizer.eos\+\_\+token\+\_\+id},  }\item[{}]{unk\+\_\+token\+\_\+id = {\ttfamily tokenizer.unk\+\_\+token\+\_\+id},  }\item[{}]{pad\+\_\+token\+\_\+id = {\ttfamily tokenizer.pad\+\_\+token\+\_\+id},  }\item[{}]{device = {\ttfamily \textquotesingle{}cuda\textquotesingle{}} }\end{DoxyParamCaption})}



Передаёт агрументы в функцию self.\+model.\+generate и вызывает её 


\begin{DoxyParams}{Аргументы}
{\em bot\+\_\+input\+\_\+ids} & Токены, подаваемые self.\+model.\+generate на вход \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Возвращает}
Токены, сгенерированные моделью 
\end{DoxyReturn}


См. определение в файле dialogpt.\+py строка 66

\mbox{\Hypertarget{classdialogpt_1_1_dialo_g_p_t_a9030169428af69ffd3bde4d88fa1db94}\label{classdialogpt_1_1_dialo_g_p_t_a9030169428af69ffd3bde4d88fa1db94}} 
\index{dialogpt.DialoGPT@{dialogpt.DialoGPT}!get\_length\_param@{get\_length\_param}}
\index{get\_length\_param@{get\_length\_param}!dialogpt.DialoGPT@{dialogpt.DialoGPT}}
\doxysubsubsection{\texorpdfstring{get\_length\_param()}{get\_length\_param()}}
{\footnotesize\ttfamily  str dialogpt.\+Dialo\+G\+P\+T.\+get\+\_\+length\+\_\+param (\begin{DoxyParamCaption}\item[{}]{self,  }\item[{str}]{text }\end{DoxyParamCaption})}



См. определение в файле dialogpt.\+py строка 51

\mbox{\Hypertarget{classdialogpt_1_1_dialo_g_p_t_af125e54ecf1b927033c723046c82f7a2}\label{classdialogpt_1_1_dialo_g_p_t_af125e54ecf1b927033c723046c82f7a2}} 
\index{dialogpt.DialoGPT@{dialogpt.DialoGPT}!get\_response@{get\_response}}
\index{get\_response@{get\_response}!dialogpt.DialoGPT@{dialogpt.DialoGPT}}
\doxysubsubsection{\texorpdfstring{get\_response()}{get\_response()}}
{\footnotesize\ttfamily def dialogpt.\+Dialo\+G\+P\+T.\+get\+\_\+response (\begin{DoxyParamCaption}\item[{}]{self,  }\item[{}]{text }\end{DoxyParamCaption})}



Обрабатывает текст с возможной командой 


\begin{DoxyParams}{Аргументы}
{\em text} & Текст, в котором может содержаться команда \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Возвращает}
Итоговый текст 
\end{DoxyReturn}


См. определение в файле dialogpt.\+py строка 142

\mbox{\Hypertarget{classdialogpt_1_1_dialo_g_p_t_a3ead798f0125b12e978a9a39ead02996}\label{classdialogpt_1_1_dialo_g_p_t_a3ead798f0125b12e978a9a39ead02996}} 
\index{dialogpt.DialoGPT@{dialogpt.DialoGPT}!process\_text@{process\_text}}
\index{process\_text@{process\_text}!dialogpt.DialoGPT@{dialogpt.DialoGPT}}
\doxysubsubsection{\texorpdfstring{process\_text()}{process\_text()}}
{\footnotesize\ttfamily def dialogpt.\+Dialo\+G\+P\+T.\+process\+\_\+text (\begin{DoxyParamCaption}\item[{}]{self,  }\item[{}]{input\+\_\+user,  }\item[{}]{cnt\+\_\+\+Joke\+Classifier = {\ttfamily 0} }\end{DoxyParamCaption})}



Обрабатывает текст без команды 


\begin{DoxyParams}{Аргументы}
{\em input\+\_\+user} & Текст без команды \\
\hline
{\em cnt\+\_\+\+Joke\+Classifier} & Число итераций для поиска ответа, 0 -\/ не использовать классификатор \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Возвращает}
Ответ на текст 
\end{DoxyReturn}


См. определение в файле dialogpt.\+py строка 99

\mbox{\Hypertarget{classdialogpt_1_1_dialo_g_p_t_a15964d6becb1f994fadb54fed7e00814}\label{classdialogpt_1_1_dialo_g_p_t_a15964d6becb1f994fadb54fed7e00814}} 
\index{dialogpt.DialoGPT@{dialogpt.DialoGPT}!restart@{restart}}
\index{restart@{restart}!dialogpt.DialoGPT@{dialogpt.DialoGPT}}
\doxysubsubsection{\texorpdfstring{restart()}{restart()}}
{\footnotesize\ttfamily def dialogpt.\+Dialo\+G\+P\+T.\+restart (\begin{DoxyParamCaption}\item[{}]{self }\end{DoxyParamCaption})}



Забывает все предыдущие фразы в диалоге 



См. определение в файле dialogpt.\+py строка 184



\doxysubsection{Данные класса}
\mbox{\Hypertarget{classdialogpt_1_1_dialo_g_p_t_a0f98d39513cc558c9a33ed89675e610f}\label{classdialogpt_1_1_dialo_g_p_t_a0f98d39513cc558c9a33ed89675e610f}} 
\index{dialogpt.DialoGPT@{dialogpt.DialoGPT}!chat\_history@{chat\_history}}
\index{chat\_history@{chat\_history}!dialogpt.DialoGPT@{dialogpt.DialoGPT}}
\doxysubsubsection{\texorpdfstring{chat\_history}{chat\_history}}
{\footnotesize\ttfamily dialogpt.\+Dialo\+G\+P\+T.\+chat\+\_\+history}



Содержимое текущего диалога 



См. определение в файле dialogpt.\+py строка 41

\mbox{\Hypertarget{classdialogpt_1_1_dialo_g_p_t_acc97425ec9779b1740fad698eef25cc3}\label{classdialogpt_1_1_dialo_g_p_t_acc97425ec9779b1740fad698eef25cc3}} 
\index{dialogpt.DialoGPT@{dialogpt.DialoGPT}!chat\_id@{chat\_id}}
\index{chat\_id@{chat\_id}!dialogpt.DialoGPT@{dialogpt.DialoGPT}}
\doxysubsubsection{\texorpdfstring{chat\_id}{chat\_id}}
{\footnotesize\ttfamily dialogpt.\+Dialo\+G\+P\+T.\+chat\+\_\+id}



Id чата, в котором общается бот 



См. определение в файле dialogpt.\+py строка 35

\mbox{\Hypertarget{classdialogpt_1_1_dialo_g_p_t_a217e46fddb284e8bbd89947a954f9998}\label{classdialogpt_1_1_dialo_g_p_t_a217e46fddb284e8bbd89947a954f9998}} 
\index{dialogpt.DialoGPT@{dialogpt.DialoGPT}!joke\_classifier@{joke\_classifier}}
\index{joke\_classifier@{joke\_classifier}!dialogpt.DialoGPT@{dialogpt.DialoGPT}}
\doxysubsubsection{\texorpdfstring{joke\_classifier}{joke\_classifier}}
{\footnotesize\ttfamily dialogpt.\+Dialo\+G\+P\+T.\+joke\+\_\+classifier = None\hspace{0.3cm}{\ttfamily [static]}}



Модель Joke\+Classifier. 



См. определение в файле dialogpt.\+py строка 21

\mbox{\Hypertarget{classdialogpt_1_1_dialo_g_p_t_a9603b216b1ed4304e674f872f2c4a995}\label{classdialogpt_1_1_dialo_g_p_t_a9603b216b1ed4304e674f872f2c4a995}} 
\index{dialogpt.DialoGPT@{dialogpt.DialoGPT}!model@{model}}
\index{model@{model}!dialogpt.DialoGPT@{dialogpt.DialoGPT}}
\doxysubsubsection{\texorpdfstring{model}{model}}
{\footnotesize\ttfamily dialogpt.\+Dialo\+G\+P\+T.\+model = Auto\+Model\+For\+Causal\+L\+M.\+from\+\_\+pretrained(\char`\"{}Grossmend/rudialogpt3\+\_\+medium\+\_\+based\+\_\+on\+\_\+gpt2\char`\"{}).cuda()\hspace{0.3cm}{\ttfamily [static]}}



Сама модель \mbox{\hyperlink{classdialogpt_1_1_dialo_g_p_t}{Dialo\+G\+PT}}. 



См. определение в файле dialogpt.\+py строка 18

\mbox{\Hypertarget{classdialogpt_1_1_dialo_g_p_t_aa864d538055a3f372cf59791296e301a}\label{classdialogpt_1_1_dialo_g_p_t_aa864d538055a3f372cf59791296e301a}} 
\index{dialogpt.DialoGPT@{dialogpt.DialoGPT}!token@{token}}
\index{token@{token}!dialogpt.DialoGPT@{dialogpt.DialoGPT}}
\doxysubsubsection{\texorpdfstring{token}{token}}
{\footnotesize\ttfamily dialogpt.\+Dialo\+G\+P\+T.\+token}



Токен, по которому бот может связаться с Telegram A\+PI. 



См. определение в файле dialogpt.\+py строка 31

\mbox{\Hypertarget{classdialogpt_1_1_dialo_g_p_t_a027a43bc2a377fcdf0537e78a9c72277}\label{classdialogpt_1_1_dialo_g_p_t_a027a43bc2a377fcdf0537e78a9c72277}} 
\index{dialogpt.DialoGPT@{dialogpt.DialoGPT}!tokenizer@{tokenizer}}
\index{tokenizer@{tokenizer}!dialogpt.DialoGPT@{dialogpt.DialoGPT}}
\doxysubsubsection{\texorpdfstring{tokenizer}{tokenizer}}
{\footnotesize\ttfamily dialogpt.\+Dialo\+G\+P\+T.\+tokenizer = Auto\+Tokenizer.\+from\+\_\+pretrained(\char`\"{}Grossmend/rudialogpt3\+\_\+medium\+\_\+based\+\_\+on\+\_\+gpt2\char`\"{})\hspace{0.3cm}{\ttfamily [static]}}



Токенайзер модели \mbox{\hyperlink{classdialogpt_1_1_dialo_g_p_t}{Dialo\+G\+PT}}. 



См. определение в файле dialogpt.\+py строка 15

\mbox{\Hypertarget{classdialogpt_1_1_dialo_g_p_t_ae554b8aa68bce5de3e6138b172201aeb}\label{classdialogpt_1_1_dialo_g_p_t_ae554b8aa68bce5de3e6138b172201aeb}} 
\index{dialogpt.DialoGPT@{dialogpt.DialoGPT}!user\_input\_size@{user\_input\_size}}
\index{user\_input\_size@{user\_input\_size}!dialogpt.DialoGPT@{dialogpt.DialoGPT}}
\doxysubsubsection{\texorpdfstring{user\_input\_size}{user\_input\_size}}
{\footnotesize\ttfamily dialogpt.\+Dialo\+G\+P\+T.\+user\+\_\+input\+\_\+size}



Размеры каждой фразы диалога 



См. определение в файле dialogpt.\+py строка 45

\mbox{\Hypertarget{classdialogpt_1_1_dialo_g_p_t_a530bab86aab98e328ddb7f4bc18dce98}\label{classdialogpt_1_1_dialo_g_p_t_a530bab86aab98e328ddb7f4bc18dce98}} 
\index{dialogpt.DialoGPT@{dialogpt.DialoGPT}!window\_size@{window\_size}}
\index{window\_size@{window\_size}!dialogpt.DialoGPT@{dialogpt.DialoGPT}}
\doxysubsubsection{\texorpdfstring{window\_size}{window\_size}}
{\footnotesize\ttfamily dialogpt.\+Dialo\+G\+P\+T.\+window\+\_\+size}



Число запоминаемых фраз в диалоге 



См. определение в файле dialogpt.\+py строка 49



Объявления и описания членов класса находятся в файле\+:\begin{DoxyCompactItemize}
\item 
utils/telegram/\mbox{\hyperlink{dialogpt_8py}{dialogpt.\+py}}\end{DoxyCompactItemize}
